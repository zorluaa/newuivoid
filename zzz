local repo = 'https://raw.githubusercontent.com/violin-suzutsuki/LinoriaLib/main/'

local Library = loadstring(game:HttpGet(repo .. 'Library.lua'))()
local ThemeManager = loadstring(game:HttpGet(repo .. 'addons/ThemeManager.lua'))()
local SaveManager = loadstring(game:HttpGet(repo .. 'addons/SaveManager.lua'))()


local Window = Library:CreateWindow({
    -- Set Center to true if you want the menu to appear in the center
    -- Set AutoShow to true if you want the menu to appear when it is created
    -- Position and Size are also valid options here
    -- but you do not need to define them unless you are changing them :)

    Title = 'Void.lua - Mvsd',
    Center = true,
    AutoShow = true,
    TabPadding = 8,
    MenuFadeTime = 0.2
})




-- tabs
local Main = {
    Main = Window:AddTab('Main'),
}


-- tabs
local Aiming = {
    -- Creates a new tab titled Main
    HBE = Window:AddTab('Aiming'),
}

local ESP = {
    -- Creates a new tab titled Main
    ESP = Window:AddTab('ESP'),
}


-- Create group boxes for each tab separately
local AutoGroupBox = Main.Main:AddLeftGroupbox('Auto')
local HBEGroupBox = Aiming.HBE:AddLeftGroupbox('HBE')
local ESPGroupBox = ESP.ESP:AddLeftGroupbox('ESP')



-- e


local killAllEnabled = false

-- Function to handle enabling the kill functionality
function EnableKillAll()
    while killAllEnabled do
        local success, err = pcall(function()
            local Backpack = game:GetService("Players").LocalPlayer.Backpack:GetChildren()
            local gun = nil

            -- Equip Gun If Not Equipped
            for i, v in pairs(Backpack) do
                if v:FindFirstChildWhichIsA("Sound") then
                    gun = v
                    gun.Parent = game:GetService("Players").LocalPlayer.Character
                end
            end

            -- Loop through all players in the workspace
            for i, v in pairs(workspace:GetChildren()) do
                if v:IsA("Model") and game.Players:FindFirstChild(v.Name) and v.Name ~= game.Players.LocalPlayer.Name and not v:FindFirstChild("Highlight") then
                    -- Define arguments for the shooting action
                    local args = {
                        [1] = Vector3.new(-265.2897033691406, 62.42794036865334, 162.05580139160156),  -- Target position (adjust if needed)
                        [2] = Vector3.new(-219.57574462890625, 54.045166015625, 319.8157653808594), -- Another target position
                        [3] = v.LeftLowerArm.Part,  -- Target part of the model (change this to whatever part you need)
                        [4] = Vector3.new(-234.1997833251953, 58.66779708862305, 272.2261657714844)  -- Another position (adjust if needed)
                    }

                    -- Fire the remote to trigger the shooting action
                    game:GetService("ReplicatedStorage").Remotes.Shoot:FireServer(unpack(args))
                end
            end
        end)

        if not success then
            warn("Error in EnableKillAll: " .. tostring(err))
        end

        -- Avoid overloading the game loop
        task.wait(0.1) -- Adjust delay as needed for performance
    end
end

-- Create the toggle inside LeftGroupBox
AutoGroupBox:AddToggle('KillAllToggle', {
    Text = 'Kill All',
    Default = false, -- Default state
    Tooltip = 'Automatically attacks all players in the game',

    Callback = function(Value)
        killAllEnabled = Value
        print("Kill All Enabled:", Value)

        if Value then
            task.spawn(EnableKillAll) -- Run in a separate thread
        else
            killAllEnabled = false -- Ensure loop stops
        end
    end
})







-- hbe


local isEnabled = false  -- Tracks whether hitbox modification is enabled
local hitboxSize = 10     -- Default hitbox size
local transparency = 0.5  -- Default transparency (range: 0 to 1)
local boxColor = Color3.fromRGB(255, 255, 255)  -- Default hitbox color

local players = game:GetService("Players")
local runService = game:GetService("RunService")

-- Function to modify hitboxes
local function modifyHitboxes()
    for _, player in pairs(players:GetPlayers()) do
        if player ~= players.LocalPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            local rootPart = player.Character.HumanoidRootPart
            rootPart.Size = Vector3.new(hitboxSize, hitboxSize, hitboxSize)  -- Adjust size
            rootPart.Transparency = transparency  -- Adjust transparency
            rootPart.Material = Enum.Material.Neon  -- Set material to Neon for visibility
            rootPart.CanCollide = true
            rootPart.Color = boxColor  -- Apply color from the color picker
        end
    end
end

-- Continuously apply modifications if enabled
runService.RenderStepped:Connect(function()
    if isEnabled then
        modifyHitboxes()
    end
end)

-- **Toggle for Hitbox Expander**
HBEGroupBox:AddToggle('HitboxToggle', {
    Text = 'Hitbox Expander',
    Default = false,
    Tooltip = 'Expands enemy hitboxes to make aiming easier',

    Callback = function(state)
        isEnabled = state
        print("Hitbox Modifier:", state)
        if not isEnabled then
            -- Reset hitboxes when disabled
            for _, player in pairs(players:GetPlayers()) do
                if player ~= players.LocalPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                    local rootPart = player.Character.HumanoidRootPart
                    rootPart.Size = Vector3.new(2, 2, 1)  -- Reset to default size
                    rootPart.Transparency = 0           -- Reset transparency
                    rootPart.Material = Enum.Material.Plastic  -- Reset material
                    rootPart.CanCollide = true
                    rootPart.Color = Color3.fromRGB(255, 255, 255)  -- Reset color
                end
            end
        end
    end
})

-- **Slider to adjust hitbox size**
HBEGroupBox:AddSlider('HitboxSizeSlider', {
    Text = 'Hitbox Size',
    Default = hitboxSize,
    Min = 2,
    Max = 50,
    Rounding = 1,
    Compact = false,

    Callback = function(Value)
        hitboxSize = Value
        print("Hitbox Size:", Value)
        if isEnabled then
            modifyHitboxes()  -- Update hitboxes when size is changed while enabled
        end
    end
})

-- **Slider to adjust transparency**
HBEGroupBox:AddSlider('TransparencySlider', {
    Text = 'Transparency',
    Default = transparency * 100, -- Convert transparency to 0-100 scale
    Min = 0,
    Max = 100,
    Rounding = 1,
    Compact = false,

    Callback = function(Value)
        transparency = Value / 100  -- Convert back to 0-1 range
        print("Transparency:", transparency)
        if isEnabled then
            modifyHitboxes()  -- Update transparency when changed
        end
    end
})

-- **Color Picker for Hitbox Color**
HBEGroupBox:AddLabel('Hitbox Color'):AddColorPicker('HitboxColorPicker', {
    Default = boxColor, 
    Title = 'Select Hitbox Color', -- Title when opened

    Callback = function(Value)
        boxColor = Value
        print("Box Color:", Value)
        if isEnabled then
            modifyHitboxes()  -- Update hitboxes when color is changed
        end
    end
})









local settings = {
    BoxESP = {
        Enabled = false,
        Color = Color3.fromRGB(255, 255, 255),
        Thickness = 2,
    },
    NameESP = {
        Enabled = false,
        Color = Color3.fromRGB(255, 255, 255),
        Size = 15,
    },
}

local players = game:GetService("Players")
local runService = game:GetService("RunService")
local camera = game.Workspace.CurrentCamera
local localPlayer = players.LocalPlayer
local espObjects = {} -- Store ESP objects per player

-- Function to create Drawing objects
local function createDrawing(type, properties)
    local obj = Drawing.new(type)
    for prop, value in pairs(properties) do
        obj[prop] = value
    end
    return obj
end

local function createESPForPlayer(player)
    local espData = {
        Box = {
            Top = createDrawing("Line", {Thickness = settings.BoxESP.Thickness, Color = settings.BoxESP.Color}),
            Bottom = createDrawing("Line", {Thickness = settings.BoxESP.Thickness, Color = settings.BoxESP.Color}),
            Left = createDrawing("Line", {Thickness = settings.BoxESP.Thickness, Color = settings.BoxESP.Color}),
            Right = createDrawing("Line", {Thickness = settings.BoxESP.Thickness, Color = settings.BoxESP.Color}),
        },
        Name = createDrawing("Text", {
            Size = settings.NameESP.Size,
            Color = settings.NameESP.Color,
            Center = true,
        }),
    }
    espObjects[player] = espData
end

local function cleanupESPForPlayer(player)
    if espObjects[player] then
        for _, obj in pairs(espObjects[player].Box) do
            obj:Remove()
        end
        if espObjects[player].Name then
            espObjects[player].Name:Remove()
        end
        espObjects[player] = nil
    end
end

local function updateESP()
    for player, data in pairs(espObjects) do
        if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            local hrp = player.Character.HumanoidRootPart
            local screenPos, onScreen = camera:WorldToViewportPoint(hrp.Position)

            if onScreen then
                -- Update Box ESP
                if settings.BoxESP.Enabled then
                    local size = Vector3.new(2, 3, 0)
                    local topLeft = camera:WorldToViewportPoint((hrp.CFrame * CFrame.new(size.X, size.Y, 0)).Position)
                    local topRight = camera:WorldToViewportPoint((hrp.CFrame * CFrame.new(-size.X, size.Y, 0)).Position)
                    local bottomLeft = camera:WorldToViewportPoint((hrp.CFrame * CFrame.new(size.X, -size.Y, 0)).Position)
                    local bottomRight = camera:WorldToViewportPoint((hrp.CFrame * CFrame.new(-size.X, -size.Y, 0)).Position)

                    local box = data.Box
                    box.Top.From = Vector2.new(topLeft.X, topLeft.Y)
                    box.Top.To = Vector2.new(topRight.X, topRight.Y)
                    box.Bottom.From = Vector2.new(bottomLeft.X, bottomLeft.Y)
                    box.Bottom.To = Vector2.new(bottomRight.X, bottomRight.Y)
                    box.Left.From = Vector2.new(topLeft.X, topLeft.Y)
                    box.Left.To = Vector2.new(bottomLeft.X, bottomLeft.Y)
                    box.Right.From = Vector2.new(topRight.X, topRight.Y)
                    box.Right.To = Vector2.new(bottomRight.X, bottomRight.Y)

                    for _, line in pairs(box) do
                        line.Color = settings.BoxESP.Color
                        line.Thickness = settings.BoxESP.Thickness
                        line.Visible = true
                    end
                else
                    for _, line in pairs(data.Box) do
                        line.Visible = false
                    end
                end

                -- Update Name ESP
                if settings.NameESP.Enabled then
                    local nameTag = data.Name
                    nameTag.Text = player.Name
                    nameTag.Position = Vector2.new(screenPos.X, screenPos.Y - 30)
                    nameTag.Size = settings.NameESP.Size
                    nameTag.Color = settings.NameESP.Color
                    nameTag.Visible = true
                else
                    data.Name.Visible = false
                end
            else
                -- Hide ESP if off-screen
                for _, line in pairs(data.Box) do
                    line.Visible = false
                end
                data.Name.Visible = false
            end
        else
            cleanupESPForPlayer(player)
        end
    end
end

-- Setup ESP for Players
local function setupESPForPlayer(player)
    if player ~= localPlayer then
        cleanupESPForPlayer(player)
        createESPForPlayer(player)
        player.CharacterAdded:Connect(function()
            wait(0.1)
            cleanupESPForPlayer(player)
            createESPForPlayer(player)
        end)
    end
end

local function setupESP()
    for _, player in ipairs(players:GetPlayers()) do
        setupESPForPlayer(player)
    end

    players.PlayerAdded:Connect(setupESPForPlayer)
    players.PlayerRemoving:Connect(cleanupESPForPlayer)

    runService.RenderStepped:Connect(updateESP)
end

-- GUI Integration with LeftGroupBox
ESPGroupBox:AddToggle('BoxESP_Toggle', {
    Text = 'Box ESP',
    Default = false,
    Tooltip = 'Enables or disables Box ESP',
    Callback = function(Value)
        settings.BoxESP.Enabled = Value
    end
})

ESPGroupBox:AddLabel('Box ESP Color'):AddColorPicker('BoxESP_ColorPicker', {
    Default = settings.BoxESP.Color,
    Title = 'Select Box ESP Color',
    Callback = function(Value)
        settings.BoxESP.Color = Value
    end
})

ESPGroupBox:AddSlider('BoxESP_Thickness', {
    Text = 'Box Thickness',
    Default = settings.BoxESP.Thickness,
    Min = 1,
    Max = 5,
    Rounding = 1,
    Callback = function(Value)
        settings.BoxESP.Thickness = Value
    end
})

ESPGroupBox:AddToggle('NameESP_Toggle', {
    Text = 'Name ESP',
    Default = false,
    Tooltip = 'Enables or disables Name ESP',
    Callback = function(Value)
        settings.NameESP.Enabled = Value
    end
})

ESPGroupBox:AddLabel('Name ESP Color'):AddColorPicker('NameESP_ColorPicker', {
    Default = settings.NameESP.Color,
    Title = 'Select Name ESP Color',
    Callback = function(Value)
        settings.NameESP.Color = Value
    end
})
ESPGroupBox:AddSlider('NameESP_Size', {
    Text = 'Name ESP Size',
    Default = settings.NameESP.Size,
    Min = 10,
    Max = 30,
    Rounding = 1,
    Callback = function(Value)
        settings.NameESP.Size = Value
    end
})

-- Start the ESP system
setupESP()
